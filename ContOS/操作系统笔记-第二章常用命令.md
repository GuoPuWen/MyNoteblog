# 第2章 常用命令

### 1.系统的目录结构

| 目录     | 功能                                               |
| -------- | -------------------------------------------------- |
| /        | 文件系统结构的起始点                               |
| /root    | 系统管理员的工作目录                               |
| /home    | 普通用户工作目录                                   |
| /bin     | 存放最经常使用的命令                               |
| /sbin    | 系统管理员使用的系统管理程序                       |
| /boot    | 启动Linux时使用的一些核心文件                      |
| /dev     | 存放的时Linux的外部设备                            |
| /etc     | 系统管理所需要的配置文件                           |
| /lib     | 存放着系统最基本的动态连接共享库件                 |
| /media   | linux会把识别的设备挂载到这个目录下，例如光驱、U盘 |
| /mnt     | 临时挂载别的文件系统的挂载目录                     |
| /usr     | 包含所有的用户程序、库文件等                       |
| /usr/src | 内核源代码默认的放置目录                           |
| /var     | 系统产生的缓存文件、日志记录                       |

### 2.简单命令

##### 2.1 who

列出所有正在使用系统的用户相关信息

##### 2.2 echo

 将命令行中的参数显示到屏幕上 常用于shell脚本中作为输出提示

##### 2.3 date

```shell
-d<字符串>：显示字符串所指的日期与时间。字符串前后必须加上双引号； 
-s<字符串>：根据字符串来设置日期与时间。字符串前后必须加上双引号； 
-u：显示GMT； 
--help：在线帮助； 
--version：显示版本信息。
```

##### 2.4 cal 

显示日历

```shell
cal 2015:列出2015年所有日历

cal 5 2015:列出2015年5月的日历
```

##### 2.5 clear

清除屏幕上的信息

### 3.文件管理命令

##### 3.1 pwd

打印当前工作目录的绝对路径

##### 3.2 cd

切换目录  

##### 3.3 ls

列出参数的属性信息

  格式：ls 【选项】 【参数】

```shell
选项：
	-a 显示所有文件(包括隐藏文件)
	-d 显示目录信息，而不是目录下的文件
	-h 人性化显示，按照我们的习惯显示文件大小
	-l 长格式显示
	-i 显示文件的第i节点号
```

##### 3.4 touch

 修改文件时间为系统当前的时间  如果文件不存在，则创建一个空文件

##### 3.5 mkdir

创建目录

```shell
选项
	-p 递归建立所需目录
	-m	配置文件的权限
```

##### 3.6 rmdir

注意：只能删除空目录

```shell
-p 递归删除目录
```

##### 3.7 cp

将源文件或目录复制到指定目录

```shell
选项
	-a 相当于-dpr选项，只要加了-a复制后的文件和源文件一样，包括时间，权限，所有者，所属者
	-r 复制目录
```

##### 3.8 rm

 删除文件或目录

```shell
选项
	-f 强制删除(force)
	-r 递归删除，可以删除目录
	注意：-rf成习惯用法
```

##### 3.9 mv

移动文件或目录，给文件改名

mv 源文件或目录 目标目录

### 4.查看文件

##### 4.1 cat

 连接或显示文件内容

```shell
-n 显示行号
```

##### 4.2 more less head tail

分页显示文件内容，字面意思

##### 4.3 wc

分页显示文件内容

```shel
-l         计行数line
-w        统计字数word（以字符串为单位）
-c         统计字节数byte
```

### 5.文件搜索

##### 5.1 which

 查看命令所在路径

##### 5.2 find

查找指定文件或目录

```shel
-name	根据文件名查找
-size     根据文件的大小查找
-user     根据文件的所有者查找
```

##### 5.3 locate    

 	按照数据库搜索，搜索速度很快，消耗资源小，原因在于它不搜索具体目录，而是搜索一个数据库/var/lib/mlocate/mlocate.db 。这个数据库中含有本地所有文件信息。Linux系统自动创建这个数据库，并且每天自动更新一次，因此，我们在用whereis和locate 查找文件时，有时会找到已经被删除的数据，或者刚刚建立文件，却无法查找到，原因就是因为数据库文件没有被更新。为了避免这种情况，可以在使用locate之前，先使用updatedb命令，手动更新数据库。

##### 5.4 grep

find是文件查找， grep是文件内容查找。

```
格式：grep 搜索内容 文件名
```

### 6. 权限管理

Linux系统用户：

- 主用户(文件和目录的拥有者) u
- 同组用户 g
- 其他用户 o

将用户权限分为：

- 读(read) r
- 写(write) w
- 执行(execute) x

##### 6.1 chmod

变更文件或目录的权限

使用这个chmod，有两种方式：

- 符号模式：用字符串设置权限
- 绝对模式：使用八进制数设置权限

```shell
例子：
chmod ugo+x testfile
chmod a+x testfile
chmod ug+w,o-w testfile

chmod 754 testfile
chmod 644 testfile
chmod 777 testfile
```

##### 6.2 umask

umask缺省权限，就是文件一创建时的默认权限

##### 6.3 chown

修改所有者和所属组

![](C:\Users\VSUS\Desktop\笔记\ContOS\操作系统\36.png)

注意：同时修改所有者和所属组的权限中间用冒号或者.隔开

### 7. 链接文件

```shell
格式
in 源文件 链接名 #硬链接
in -s 源文件 链接名 #符号连接(软链接)
```

硬链接和符号链接的区别

- 符号链接是一种特殊的文件类型
- 在硬链接中，链接数会增加，在符号链接中，链接数为1
- 删除文件
  - 在硬链接找那个，删除源文件，文件不会被真正删除，只是链接数减1
  - 在符号链接中，删除源文件，源文件被删除，其他符号链接文件无法访问

- 硬链接无法链接目录

### 8. 用户管理

##### 8.1 useradd

添加用户，只能为root用户，其他用户使用要用sudo

```shell
[root@localhost ~]# useradd [选项] 用户名 
选项：
	-u 指定UID
	-g 组名指定初始组不要手工指定
	-G 组名指定附加组，把用户加入组，使用附加组
	-c 说明添加说明
	-d 目录手工指定家目录，目录不需要事先建立
 	-s shel1/bin/bash.
```

##### 8.2 userdel

删除用户

```shell
[root@localhost ~]# userdel -r 用户名
选项：
	-r 在删除用户的同时删除家目录
```

##### 8.3 su

切换用户

##### 8.4 groupadd 

添加用户组

```shell
[rootelocalhost ~1#groupadd [选项] 组名
选项：
	-gGID 指定组ID添加用户组
```

##### 8.5 groupdel

删除用户组

```shell
[rootelocalhost ~1#groupdel  组名
```

##### 8.6  gpasswd

把用户添加进组或从组删除

```shell
[rootelocalhost ~1#gpasswd [选项] 组名
选项：
	-a用户名 把用户加入组
	-d用户名 把用户从组中删除
```



##### 8.7 一些文件

==/etc/passwd==：用户信息文件

==/etc/shadow：==影子文件

==/etc/group:==组信息文件

==/etc/gshadow:==组密码文件

### 9. 压缩和解压缩

压缩和解压缩文件的格式有很多，这里只说常用的tar命令，tar命令用于打包和解打包.tar.gz  .tar.bz2格式

```shell
[root@localhost ~]# tar [选项] 源文件或目录
选项：
	-c 打包
	-f 指定的压缩文件名
	-v 显示打包文件过程

	-x 解打包
	-t 测试，不解打包，查看包中文件
	-C(大) 目录：指定解打包位置(在源文件的后面)
	
	-z：压缩和解压缩“.tar.gz”格式   
	-j：压缩和解压缩“.tar.bz2”格式
```

常见用法

```shell
[root@localhost ~]# tar -zcvf  test.tar.gz  test/ 
#压缩
[root@localhost ~]# tar  -ztvf  test.tar.gz
#只查看，不解压
[root@localhost ~]# tar  -zxvf  test.tar.gz -C /tmp 
#解压缩到指定位置
[root@localhost ~]# tar  -zxvf  test.tar.gz -C /tmp  test/cde
#只解压压缩包中的特定文件，到指定位置
```

### 10.进程管理

##### 10.1 ps

查看系统中正在运行的进程

```shell
选项:			
-a	显示当前终端下的所有进程，包括其他用户启动的进程
-u	以用户的形式，显示系统中的进程
-x	忽视终端机，显示所有进程
-l	使用详细的格式显示进程信息，等同于
```

```shell
常见用法
ps -ef | grep mysql
ps -aux
```

##### 10.2 top

实时监控进程状态，top屏幕自动没3秒刷新一次

##### 10.3 pstree

以树状图的形式显示系统中的进程

##### 10.4 kill

常用法：

```shell
kill -9 pid
```

